2020-12-24 23:33:16 WARNING (MainThread) [homeassistant.loader] You are using a custom integration for ha_connector which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant.
2020-12-24 23:33:22 WARNING (MainThread) [homeassistant.components.mqtt] Data in your configuration entry is going to override your configuration.yaml: {'broker': 'core-mosquitto.local.hass.io', 'discovery': True, 'password': 'raiWo4eixah8HaiS1dei6Ahweehoh2oPhooth0phutoo6quuFoo7ohraov4kuw4u', 'port': 1883, 'protocol': '3.1.1', 'username': 'homeassistant'}
2020-12-25 00:06:58 WARNING (Thread-9) [pychromecast.socket_client] [거실 2(192.168.1.226):8009] Heartbeat timeout, resetting connection
2020-12-25 00:07:28 ERROR (Thread-9) [pychromecast.socket_client] [거실 2(192.168.1.226):8009] Failed to connect to service Chromecast-385512aceeb78556b44e1bac24941a7c._googlecast._tcp.local., retrying in 5.0s
2020-12-25 00:43:40 WARNING (zeroconf-ServiceBrowser__elg._tcp.local.-_api._udp.local.-_esphomelib._tcp.local.-_miio._udp.local.-_ipps._tcp.local.-_viziocast._tcp.local.-_daap._tcp.local.-_dkapi._tcp.local.-_hap._tcp.local.-_ipp._tcp.local.-_axis-video._tcp.local.-_printer._tcp.local.-_wled._tcp.local.-_nut._tcp.local.-_spotify-connect._tcp.local.-_googlecast._tcp.local._140540439014176) [zeroconf] Error sending through socket 15
Traceback (most recent call last):
  File "/usr/local/lib/python3.7/site-packages/zeroconf/__init__.py", line 2792, in send
    bytes_sent = s.sendto(packet, 0, (real_addr, port))
PermissionError: [Errno 1] Operation not permitted
2020-12-25 02:24:06 WARNING (Thread-7) [pychromecast.socket_client] [안방(192.168.1.202):8009] Heartbeat timeout, resetting connection
2020-12-25 03:18:49 WARNING (Thread-8) [pychromecast.socket_client] [거실(192.168.1.229):8009] Heartbeat timeout, resetting connection
2020-12-25 03:42:27 WARNING (Thread-10) [pychromecast.socket_client] [용수방(192.168.1.156):8009] Heartbeat timeout, resetting connection
2020-12-25 03:43:09 WARNING (MainThread) [homeassistant.helpers.entity] Update of alarm_control_panel.xiaomi_gateway_alarm is taking over 10 seconds
2020-12-25 03:43:09 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 182, in send
    data, addr = s.recvfrom(1024)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 226, in send
    extra_parameters=extra_parameters,
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 03:43:35 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 03:44:06 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 03:44:37 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 03:45:07 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 03:45:38 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 03:46:09 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 03:46:40 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 03:47:11 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 03:47:42 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 03:48:13 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 03:48:43 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 03:49:14 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 03:49:45 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 03:50:16 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 03:50:47 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 03:51:17 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 03:51:48 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 03:52:18 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 03:52:49 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 03:53:20 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 03:53:51 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 03:54:22 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 03:54:53 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 03:55:24 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 03:55:55 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 03:56:26 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 03:56:57 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 03:57:28 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 03:57:59 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 03:58:30 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 03:59:01 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 03:59:32 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 04:00:03 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 04:00:34 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 04:01:04 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 04:01:35 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 04:02:06 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 04:02:37 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 04:03:08 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 04:03:39 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 04:04:10 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 04:04:41 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 04:05:11 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 04:05:42 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 04:06:13 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 04:06:44 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 04:07:15 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 04:07:46 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 04:08:17 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 04:08:48 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 04:09:19 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 04:09:50 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 04:10:21 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 04:10:52 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 04:11:23 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 04:11:54 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 04:12:25 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:20:20 WARNING (MainThread) [homeassistant.helpers.entity] Update of alarm_control_panel.xiaomi_gateway_alarm is taking over 10 seconds
2020-12-25 05:20:20 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 182, in send
    data, addr = s.recvfrom(1024)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 226, in send
    extra_parameters=extra_parameters,
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:20:46 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:21:17 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:21:47 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:22:18 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:22:49 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:23:20 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:23:51 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:24:22 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:24:52 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:25:23 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:25:54 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:26:25 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:26:56 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:27:27 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:27:58 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:28:29 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:28:59 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:29:30 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:30:01 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:30:31 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:31:02 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:31:33 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:32:04 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:32:35 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:33:06 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:33:37 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:34:08 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:34:39 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:35:10 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:35:40 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:36:11 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:36:42 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:37:13 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:37:43 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:38:14 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:38:45 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:39:16 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:39:47 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:40:18 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:40:49 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:41:20 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:41:51 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:42:22 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:42:53 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:43:23 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:43:54 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:44:25 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:44:56 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:45:27 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:45:58 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:46:29 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:47:00 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:47:31 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:48:02 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:48:33 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:49:04 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:49:35 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:50:06 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:50:37 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:51:08 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:51:39 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:52:10 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:52:41 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:53:12 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:53:43 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:54:14 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:54:45 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:55:16 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:55:46 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:56:17 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:56:47 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:57:18 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:57:49 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:58:20 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 05:58:51 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-25 10:29:56 WARNING (Thread-9) [pychromecast.socket_client] [거실 2(192.168.1.226):8009] Heartbeat timeout, resetting connection
2020-12-25 10:30:26 ERROR (Thread-9) [pychromecast.socket_client] [거실 2(192.168.1.226):8009] Failed to connect to service Chromecast-385512aceeb78556b44e1bac24941a7c._googlecast._tcp.local., retrying in 5.0s
2020-12-25 13:52:54 WARNING (Thread-9) [pychromecast.socket_client] [거실 2(192.168.1.226):8009] Heartbeat timeout, resetting connection
2020-12-25 13:53:24 ERROR (Thread-9) [pychromecast.socket_client] [거실 2(192.168.1.226):8009] Failed to connect to service Chromecast-385512aceeb78556b44e1bac24941a7c._googlecast._tcp.local., retrying in 5.0s
2020-12-25 16:40:12 WARNING (Thread-9) [pychromecast.socket_client] [거실 2(192.168.1.226):8009] Heartbeat timeout, resetting connection
2020-12-25 16:40:30 ERROR (Thread-9) [pychromecast.socket_client] [거실 2(192.168.1.226):8009] Failed to connect to service Chromecast-385512aceeb78556b44e1bac24941a7c._googlecast._tcp.local., retrying in 5.0s
2020-12-25 20:32:17 WARNING (Thread-9) [pychromecast.socket_client] [거실 2(192.168.1.226):8009] Heartbeat timeout, resetting connection
2020-12-25 20:32:47 ERROR (Thread-9) [pychromecast.socket_client] [거실 2(192.168.1.226):8009] Failed to connect to service Chromecast-385512aceeb78556b44e1bac24941a7c._googlecast._tcp.local., retrying in 5.0s
2020-12-26 02:03:09 WARNING (Thread-7) [pychromecast.socket_client] [안방(192.168.1.202):8009] Heartbeat timeout, resetting connection
2020-12-26 03:14:25 WARNING (Thread-10) [pychromecast.socket_client] [용수방(192.168.1.156):8009] Heartbeat timeout, resetting connection
2020-12-26 04:54:13 WARNING (Thread-8) [pychromecast.socket_client] [거실(192.168.1.229):8009] Heartbeat timeout, resetting connection
2020-12-26 08:19:49 WARNING (Thread-9) [pychromecast.socket_client] [거실 2(192.168.1.226):8009] Heartbeat timeout, resetting connection
2020-12-26 08:20:07 ERROR (Thread-9) [pychromecast.socket_client] [거실 2(192.168.1.226):8009] Failed to connect to service Chromecast-385512aceeb78556b44e1bac24941a7c._googlecast._tcp.local., retrying in 5.0s
2020-12-26 08:55:45 WARNING (Thread-9) [pychromecast.socket_client] [거실 2(192.168.1.226):8009] Heartbeat timeout, resetting connection
2020-12-26 08:56:03 ERROR (Thread-9) [pychromecast.socket_client] [거실 2(192.168.1.226):8009] Failed to connect to service Chromecast-385512aceeb78556b44e1bac24941a7c._googlecast._tcp.local., retrying in 5.0s
2020-12-26 14:43:21 ERROR (MainThread) [aiohttp.server] Error handling request
Traceback (most recent call last):
  File "/usr/local/lib/python3.7/site-packages/aiohttp/web_protocol.py", line 275, in data_received
    messages, upgraded, tail = self._request_parser.feed_data(data)
  File "aiohttp\_http_parser.pyx", line 523, in aiohttp._http_parser.HttpParser.feed_data
aiohttp.http_exceptions.BadStatusLine: invalid HTTP method
2020-12-27 02:00:40 WARNING (Thread-8) [pychromecast.socket_client] [거실(192.168.1.229):8009] Heartbeat timeout, resetting connection
2020-12-27 04:00:48 WARNING (Thread-10) [pychromecast.socket_client] [용수방(192.168.1.156):8009] Heartbeat timeout, resetting connection
2020-12-27 04:01:39 WARNING (MainThread) [homeassistant.helpers.entity] Update of alarm_control_panel.xiaomi_gateway_alarm is taking over 10 seconds
2020-12-27 04:01:39 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 182, in send
    data, addr = s.recvfrom(1024)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 226, in send
    extra_parameters=extra_parameters,
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:02:05 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:02:36 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:03:07 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:03:37 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:04:07 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:04:38 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:05:09 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:05:39 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:06:10 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:06:41 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:07:12 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:07:42 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:08:13 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:08:44 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:09:15 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:09:46 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:10:17 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:10:48 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:11:19 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:11:50 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:12:21 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:12:52 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:13:23 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:13:54 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:14:25 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:14:55 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:15:26 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:15:57 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:16:28 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:16:59 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:17:30 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:18:00 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:18:31 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:19:02 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:19:33 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:20:04 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:20:34 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:21:05 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:21:36 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:22:07 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:22:37 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:23:08 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:23:39 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:24:10 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:24:41 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:25:12 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:25:43 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:26:14 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:26:45 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:27:15 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:27:46 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:28:16 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:28:47 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:29:17 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:29:33 WARNING (Thread-7) [pychromecast.socket_client] [안방(192.168.1.202):8009] Heartbeat timeout, resetting connection
2020-12-27 04:29:48 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:30:18 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:30:49 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:31:20 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:31:51 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:32:22 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:32:53 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:33:24 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:33:55 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:34:26 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:34:57 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 04:35:28 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:12:34 WARNING (MainThread) [homeassistant.helpers.entity] Update of alarm_control_panel.xiaomi_gateway_alarm is taking over 10 seconds
2020-12-27 05:12:34 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 182, in send
    data, addr = s.recvfrom(1024)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 226, in send
    extra_parameters=extra_parameters,
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:13:00 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:13:31 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:14:01 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:14:32 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:15:03 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:15:34 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:16:05 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:16:36 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:17:06 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:17:37 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:18:08 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:18:39 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:19:09 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:19:40 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:20:11 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:20:42 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:21:13 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:21:44 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:22:15 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:22:46 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:23:17 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:23:48 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:24:18 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:24:49 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:25:20 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:25:51 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:26:22 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:26:52 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:27:23 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:27:54 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:28:25 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:28:56 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:29:27 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:29:58 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:30:28 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:30:59 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:31:30 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:32:00 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:32:31 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:33:01 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:33:32 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:34:03 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:34:34 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:35:04 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:35:35 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:36:06 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:36:37 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:37:08 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:37:39 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:38:09 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:38:40 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:39:10 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:39:41 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:40:12 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:40:42 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:41:13 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:41:44 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:42:15 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:42:46 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:43:16 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:43:47 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:44:18 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:44:49 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:45:20 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:45:51 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:46:22 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:46:53 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:47:24 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:47:55 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:48:25 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:48:56 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:49:26 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:49:57 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:50:28 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:50:59 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 05:51:29 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-27 17:51:28 WARNING (Thread-9) [pychromecast.socket_client] [거실 2(192.168.1.226):8009] Heartbeat timeout, resetting connection
2020-12-27 17:51:45 ERROR (Thread-9) [pychromecast.socket_client] [거실 2(192.168.1.226):8009] Failed to connect to service Chromecast-385512aceeb78556b44e1bac24941a7c._googlecast._tcp.local., retrying in 5.0s
2020-12-27 21:57:21 WARNING (Thread-9) [pychromecast.socket_client] [거실 2(192.168.1.226):8009] Heartbeat timeout, resetting connection
2020-12-27 21:57:51 ERROR (Thread-9) [pychromecast.socket_client] [거실 2(192.168.1.226):8009] Failed to connect to service Chromecast-385512aceeb78556b44e1bac24941a7c._googlecast._tcp.local., retrying in 5.0s
2020-12-28 02:07:00 WARNING (Thread-8) [pychromecast.socket_client] [거실(192.168.1.229):8009] Heartbeat timeout, resetting connection
2020-12-28 02:07:15 ERROR (Thread-8) [pychromecast.socket_client] [거실(192.168.1.229):8009] Failed to connect to service Google-Home-Mini-7a756f179b456232833dd6240e45dcb1._googlecast._tcp.local., retrying in 5.0s
2020-12-28 02:26:47 WARNING (Thread-7) [pychromecast.socket_client] [안방(192.168.1.202):8009] Heartbeat timeout, resetting connection
2020-12-28 03:38:53 WARNING (Thread-10) [pychromecast.socket_client] [용수방(192.168.1.156):8009] Heartbeat timeout, resetting connection
2020-12-28 10:43:48 WARNING (Thread-9) [pychromecast.socket_client] [거실 2(192.168.1.226):8009] Heartbeat timeout, resetting connection
2020-12-28 10:44:18 ERROR (Thread-9) [pychromecast.socket_client] [거실 2(192.168.1.226):8009] Failed to connect to service Chromecast-385512aceeb78556b44e1bac24941a7c._googlecast._tcp.local., retrying in 5.0s
2020-12-28 12:13:05 WARNING (Thread-9) [pychromecast.socket_client] [거실 2(192.168.1.226):8009] Heartbeat timeout, resetting connection
2020-12-28 12:13:35 ERROR (Thread-9) [pychromecast.socket_client] [거실 2(192.168.1.226):8009] Failed to connect to service Chromecast-385512aceeb78556b44e1bac24941a7c._googlecast._tcp.local., retrying in 5.0s
2020-12-28 13:39:01 ERROR (MainThread) [aiohttp.server] Error handling request
Traceback (most recent call last):
  File "/usr/local/lib/python3.7/site-packages/aiohttp/web_protocol.py", line 275, in data_received
    messages, upgraded, tail = self._request_parser.feed_data(data)
  File "aiohttp\_http_parser.pyx", line 523, in aiohttp._http_parser.HttpParser.feed_data
aiohttp.http_exceptions.BadStatusLine: invalid HTTP method
2020-12-28 13:49:45 WARNING (Thread-9) [pychromecast.socket_client] [거실 2(192.168.1.226):8009] Heartbeat timeout, resetting connection
2020-12-28 13:50:15 ERROR (Thread-9) [pychromecast.socket_client] [거실 2(192.168.1.226):8009] Failed to connect to service Chromecast-385512aceeb78556b44e1bac24941a7c._googlecast._tcp.local., retrying in 5.0s
2020-12-28 21:38:06 WARNING (Thread-9) [pychromecast.socket_client] [거실 2(192.168.1.226):8009] Heartbeat timeout, resetting connection
2020-12-28 21:38:36 ERROR (Thread-9) [pychromecast.socket_client] [거실 2(192.168.1.226):8009] Failed to connect to service Chromecast-385512aceeb78556b44e1bac24941a7c._googlecast._tcp.local., retrying in 5.0s
2020-12-29 02:56:21 WARNING (Thread-8) [pychromecast.socket_client] [거실(192.168.1.229):8009] Heartbeat timeout, resetting connection
2020-12-29 03:19:01 WARNING (Thread-7) [pychromecast.socket_client] [안방(192.168.1.202):8009] Heartbeat timeout, resetting connection
2020-12-29 03:46:07 WARNING (Thread-10) [pychromecast.socket_client] [용수방(192.168.1.156):8009] Heartbeat timeout, resetting connection
2020-12-29 08:41:40 WARNING (MainThread) [homeassistant.helpers.entity] Update of alarm_control_panel.xiaomi_gateway_alarm is taking over 10 seconds
2020-12-29 08:41:40 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 182, in send
    data, addr = s.recvfrom(1024)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 226, in send
    extra_parameters=extra_parameters,
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:42:06 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:42:37 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:43:07 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:43:38 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:44:09 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:44:40 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:45:11 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:45:42 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:46:13 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:46:43 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:47:14 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:47:45 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:48:15 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:48:46 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:49:16 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:49:47 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:50:18 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:50:49 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:51:20 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:51:51 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:52:22 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:52:53 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:53:24 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:53:55 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:54:26 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:54:57 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:55:28 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:55:58 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:56:29 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:57:00 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:57:31 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:58:02 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:58:33 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:59:04 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 08:59:35 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:00:06 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:00:37 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:01:08 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:01:39 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:02:10 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:02:41 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:03:12 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:03:43 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:04:14 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:04:45 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:05:15 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:05:46 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:06:16 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:06:47 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:07:18 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:07:48 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:08:18 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:08:49 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:09:20 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:09:51 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:10:22 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:10:52 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:11:23 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:11:53 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:12:24 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:12:55 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:13:26 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:13:57 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:14:28 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:14:59 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:15:30 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:16:01 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:16:32 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:17:03 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:17:34 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 09:40:54 WARNING (Thread-9) [pychromecast.socket_client] [거실 2(192.168.1.226):8009] Heartbeat timeout, resetting connection
2020-12-29 09:41:24 ERROR (Thread-9) [pychromecast.socket_client] [거실 2(192.168.1.226):8009] Failed to connect to service Chromecast-385512aceeb78556b44e1bac24941a7c._googlecast._tcp.local., retrying in 5.0s
2020-12-29 10:56:59 WARNING (MainThread) [homeassistant.helpers.entity] Update of alarm_control_panel.xiaomi_gateway_alarm is taking over 10 seconds
2020-12-29 10:56:59 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 182, in send
    data, addr = s.recvfrom(1024)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 226, in send
    extra_parameters=extra_parameters,
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 10:57:25 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 10:57:56 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 10:58:27 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 10:58:58 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 10:59:29 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:00:00 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:00:31 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:01:02 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:01:33 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:02:04 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:02:35 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:03:06 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:03:37 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:04:08 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:04:39 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:05:10 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:05:41 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:06:12 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:06:43 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:07:14 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:07:45 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:08:16 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:08:47 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:09:18 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:09:49 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:10:20 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:10:51 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:11:22 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:11:53 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:12:24 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:12:55 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:13:26 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:13:57 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:14:27 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:14:58 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:15:28 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:15:59 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:16:30 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:17:00 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:17:31 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:18:01 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:18:32 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:19:03 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:19:33 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:20:04 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:20:35 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:21:06 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:21:37 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:22:08 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:22:38 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:23:09 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:23:39 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:24:10 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:24:41 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:25:12 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:25:43 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:26:14 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:26:45 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:27:16 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:27:47 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:28:18 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:28:49 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:29:20 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:29:51 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:30:22 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:30:53 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:31:24 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:31:55 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:32:26 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:32:57 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:33:28 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:33:59 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:34:30 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:35:00 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:35:31 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 11:36:02 ERROR (MainThread) [homeassistant.helpers.entity] Update for alarm_control_panel.xiaomi_gateway_alarm fails
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 272, in async_update_ha_state
    await self.async_device_update()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 463, in async_device_update
    await self.async_update()  # type: ignore
  File "/usr/src/homeassistant/homeassistant/components/xiaomi_miio/alarm_control_panel.py", line 124, in async_update
    state = await self.hass.async_add_executor_job(self._gateway.alarm.status)
  File "/usr/local/lib/python3.7/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.7/site-packages/miio/gateway.py", line 282, in status
    return self._gateway.send("get_arming").pop()
  File "/usr/local/lib/python3.7/site-packages/miio/device.py", line 147, in send
    command, parameters, retry_count, extra_parameters=extra_parameters
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 150, in send
    self.send_handshake()
  File "/usr/local/lib/python3.7/site-packages/miio/miioprotocol.py", line 62, in send_handshake
    header = m.header.value
AttributeError: 'NoneType' object has no attribute 'header'
2020-12-29 14:50:10 WARNING (Thread-9) [pychromecast.socket_client] [거실 2(192.168.1.226):8009] Heartbeat timeout, resetting connection
2020-12-29 14:50:40 ERROR (Thread-9) [pychromecast.socket_client] [거실 2(192.168.1.226):8009] Failed to connect to service Chromecast-385512aceeb78556b44e1bac24941a7c._googlecast._tcp.local., retrying in 5.0s
